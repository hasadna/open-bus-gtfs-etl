- name: gtfs-etl-full-process
  schedule_interval: "@hourly"
  description: |
    Idempotent scheduled task which ensures GTFS data integrity for last 30 days
  docs:
    desc: |
      Runs hourly, downloads the daily GTFS data from MOT if not downloaded yet.
      Downloaded data is also made publically available in the following format:
      `https://openbus-stride-public.s3.eu-west-1.amazonaws.com/gtfs_archive/year/month/dat/filename`,
      for example: https://openbus-stride-public.s3.eu-west-1.amazonaws.com/gtfs_archive/2022/06/03/ClusterToLine.zip
      possible values for filename: `ClusterToLine.zip`, `Tariff.zip`, `TripIdToDate.zip`, `israel-public-transportation.zip`.
  tasks:
    - id: full-process
      config:
        type: api
        module: open_bus_gtfs_etl.full_process
        function: main
        kwargs:
          last_days: {}
          max_run_time_seconds: {}
          only_date: {}
